DELIMITER //
CREATE TRIGGER estoque
AFTER INSERT ON item_venda FOR EACH ROW
BEGIN
    IF NEW.quantidade AND NEW.cancelado = 'N' THEN
    UPDATE produto SET quantidade_estoque = (quantidade_estoque - NEW.quantidade);
END IF;
END

//

INSERT INTO item_venda(quantidade,preco,desconto,acrescimo,valor_bruto,valor_total,cancelado,id_venda,id_produto) 
VALUES (2, 8.00, 0, 0, (2 * 16.00), (2 * 16.00) - 5 - 0, 'N', 8, 4);

